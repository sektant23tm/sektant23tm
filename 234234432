3.6 <Требования к изменению области "Приходы" в Web-интерфейсе АРМ РЦ Oracle "Управление приходами">


Кнопка "Допустить к приемке":
	При нажатии на кнопку "Допустить к приемке" на панели инструментов или в контекстном меню операции:
		По каждой поданной на вход записи:
			Запустить функцию Поиск операций для создания задания приемки. На вход передать ИД операции, на выход получить перечень операций  // функция в п. 2.1
				Если в перечне больше одной операции, то:
					Выводить пользователю экран Информирование о совместной приемке приходов, на экран передать перечень операций
						Переходить к следующей записи. Если нет следующей записи, то завершить цикл.
					По каждой операции из перечня запустить функцию Допуск к приемке
						Если по всем операциям из перечня функция  Допуск к приемке отработала успешно, то:
							[ver. 1.12] Если статус операции = 2-Принимаемая на склад И проставлен допуск к приемке ОЗ, то: [/ver. 1.12]
								Запускать функцию Создание задания "Приемка товара контроллером" по приходной операции, на вход передавать перечень операций
						Иначе:
							Выводить пользователю ошибку и выходить из функции
							Не менять статус операций из перечня
					Исключить из обработки операции из перечня
				Иначе:
					По операции запустить функцию Допуск к приемке
					Отсюда повышается статус операции, триггерной логикой создается задание приемки
					wms.whs_op_utils.check_op_status [ver. 1.8] тут триггерной логикой запускается функция Создание задания "Приемка товара контроллером" по приходной операции [/ver. 1.8]
					Если операция не содержит алкоголь и не "Операция содержит только не маркированный товар", то:
						Проставить Флаг необходимости создания задания приемки
			Переходить к следующей записи. Если нет следующей записи, завершить цикл. [/ver. 1.2]
